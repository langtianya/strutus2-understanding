
<!-- 
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE- 2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License. 
-->

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML>
  <HEAD>
    <LINK type="text/css" rel="stylesheet" href="https://struts.apache.org/css/default.css">
    <STYLE type="text/css">
      .dp-highlighter {
        width:95% !important;
      }
    </STYLE>
    <STYLE type="text/css">
      .footer {
        background-image:      url('https://cwiki.apache.org/confluence/images/border/border_bottom.gif');
        background-repeat:     repeat-x;
        background-position:   left top;
        padding-top:           4px;
        color:                 #666;
      }
    </STYLE>
    <SCRIPT type="text/javascript" language="javascript">
      var hide = null;
      var show = null;
      var children = null;

      function init() {
        /* Search form initialization */
        var form = document.forms['search'];
        if (form != null) {
          form.elements['domains'].value = location.hostname;
          form.elements['sitesearch'].value = location.hostname;
        }

        /* Children initialization */
        hide = document.getElementById('hide');
        show = document.getElementById('show');
        children = document.all != null ?
                   document.all['children'] :
                   document.getElementById('children');
        if (children != null) {
          children.style.display = 'none';
          show.style.display = 'inline';
          hide.style.display = 'none';
        }
      }

      function showChildren() {
        children.style.display = 'block';
        show.style.display = 'none';
        hide.style.display = 'inline';
      }

      function hideChildren() {
        children.style.display = 'none';
        show.style.display = 'inline';
        hide.style.display = 'none';
      }
    </SCRIPT>
    <TITLE>Codebehind Plugin</TITLE>
  <META http-equiv="Content-Type" content="text/html;charset=UTF-8"></HEAD>
  <BODY onload="init()">
    <TABLE border="0" cellpadding="2" cellspacing="0" width="100%">
      <TR class="topBar">
        <TD align="left" valign="middle" class="topBarDiv" align="left" nowrap="">
          &nbsp;<A href="home.html" title="Apache Struts 2 Documentation">Apache Struts 2 Documentation</A>&nbsp;&gt;&nbsp;<A href="home.html" title="Home">Home</A>&nbsp;&gt;&nbsp;<A href="guides.html" title="Guides">Guides</A>&nbsp;&gt;&nbsp;<A href="plugin-developers-guide.html" title="Plugin Developers Guide">Plugin Developers Guide</A>&nbsp;&gt;&nbsp;<A href="" title="Codebehind Plugin">Codebehind Plugin</A>
        </TD>
        <TD align="right" valign="middle" nowrap="">
          <FORM name="search" action="http://www.google.com/search" method="get">
            <INPUT type="hidden" name="ie" value="UTF-8">
            <INPUT type="hidden" name="oe" value="UTF-8">
            <INPUT type="hidden" name="domains" value="">
            <INPUT type="hidden" name="sitesearch" value="">
            <INPUT type="text" name="q" maxlength="255" value="">        
            <INPUT type="submit" name="btnG" value="Google Search">
          </FORM>
        </TD>
      </TR> 
    </TABLE>

    <DIV id="PageContent">
      <DIV class="pageheader" style="padding: 6px 0px 0px 0px;">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="/wiki/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <DIV style="margin: 0px 10px 0px 10px" class="smalltext">Apache Struts 2 Documentation</DIV>
        <DIV style="margin: 0px 10px 8px 10px" class="pagetitle">Codebehind Plugin</DIV>

        <DIV class="greynavbar" align="right" style="padding: 2px 10px; margin: 0px;">
          <A href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=29637">
            <IMG src="https://cwiki.apache.org/confluence/images/icons/notep_16.gif" height="16" width="16" border="0" align="absmiddle" title="Edit Page"></A>
            <A href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=29637">Edit Page</A>
          &nbsp;
          <A href="https://cwiki.apache.org/confluence/pages/listpages.action?key=WW">
            <IMG src="https://cwiki.apache.org/confluence/images/icons/browse_space.gif" height="16" width="16" border="0" align="absmiddle" title="Browse Space"></A>
            <A href="https://cwiki.apache.org/confluence/pages/listpages.action?key=WW">Browse Space</A>
          &nbsp;
          <A href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=WW&fromPageId=29637">
            <IMG src="https://cwiki.apache.org/confluence/images/icons/add_page_16.gif" height="16" width="16" border="0" align="absmiddle" title="Add Page"></A>
          <A href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=WW&fromPageId=29637">Add Page</A>
          &nbsp;
          <A href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=WW&fromPageId=29637">
            <IMG src="https://cwiki.apache.org/confluence/images/icons/add_blogentry_16.gif" height="16" width="16" border="0" align="absmiddle" title="Add News"></A>
          <A href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=WW&fromPageId=29637">Add News</A>
        </DIV>
      </DIV>

      <DIV class="pagecontent">
        <DIV class="wiki-content">
          <DIV class="panelMacro"><TABLE class="warningMacro"><COLGROUP><COL width="24"><COL></COLGROUP><TR><TD valign="top"><IMG src="https://cwiki.apache.org/confluence/images/icons/emoticons/forbidden.gif" width="16" height="16" align="absmiddle" alt="" border="0"></TD><TD><B>Deprecated Plugin</B><BR>Since 2.1 this plugin has been deprecated in favor of the <A href="convention-plugin.html" title="Convention Plugin">Convention Plugin</A>. See <A href="converting-application-from-codebehind-to-convention-plugin.html" title="Converting application from Codebehind to Convention Plugin">this page</A> for details on how to port your application to the Convention plugin.</TD></TR></TABLE></DIV>

<P>The Codebehind Plugin reduces mundane configuration by adding &quot;Page Controller&quot; conventions. </P>

<P>There are two common situations where the plugin applies convention over configuration:</P>

<OL>
	<LI><B>Default mappings</B> - (or &quot;pages with no mappings&quot;) These are cases where the page is mostly static and doesn't require an Action class to execute logic.  Common examples are index pages and those that heavily use JSP tags or JSF components.</LI>
	<LI><B>Default results</B> - The purpose of most Actions is to execute code to prepare the data for a specific page. The name of this page is often the same as the Action itself.</LI>
</OL>


<P>To improve the first case, the plugin will detect the presence of a page with no corresponding Struts mapping and automatically substitute a mapping that uses the default Action class for the package, which is usually ActionSupport, a NO-OP Action.  </P>

<P>For the problem of default results, the plugin will make it unnecessary to define those results by detecting the presence of a page for that Action and creating the appropriate configuration on-the-fly. </P>

<P>In these two ways, the plugin encourages a page-based development style, handling the linking of Struts actions with pages and pages with Results in a common way.</P>

<P><IMG class="emoticon" src="https://cwiki.apache.org/confluence/images/icons/emoticons/check.gif" height="16" width="16" align="absmiddle" alt="" border="0"> To see the plugin in action, review the &quot;Person Manager&quot; example in the Showcase application.</P>

<H2><A name="CodebehindPlugin-Features"></A>Features</H2>

<UL>
	<LI>Provides default mappings for pages that don't have Actions</LI>
	<LI>Provides default results by auto-discovering pages</LI>
</UL>


<H2><A name="CodebehindPlugin-Usage"></A>Usage</H2>

<P>To use this plugin, simply copy its jar into your application.  The plugin can be used to find default mappings and results.</P>

<H3><A name="CodebehindPlugin-DefaultMappings"></A>Default Mappings</H3>

<P>To better facilitate a code-behind development approach, the plugin will detect the case where the request has no defined Struts action mapping, yet there exists a corresponding page.  It will then create a dummy action mapping referencing the default Action class (usually ActionSupport), allowing the page to be displayed normally.  Additionally, the default interceptor stack for the configured package will be applied, bringing the workflow benefits of interceptor stacks to simple pages.</P>

<P>When no explicitly configured Action can be found for a request, the plugin searches the web application for a likely page. Specifically, the following pattern is used to locate a page:</P>

<P><TT>/NAMESPACE/ACTION.(jsp|vm|ftl)</TT></P>

<P>For example, if the request is for <TT><A href="http://www.company.com/myapp/member/login.action" class="external-link" rel="nofollow">http://www.company.com/myapp/member/login.action</A></TT>, the plugin will look for the following pages, in this order: </P>

<OL>
	<LI><TT>/member/login.jsp</TT></LI>
	<LI><TT>/member/login.vm</TT></LI>
	<LI><TT>/member/login.ftl</TT></LI>
</OL>


<P>If any of those pages are found, the plugin will construct an ActionConfig object on the fly, using the ActionSupport class for the Action and a single Result that points to the discovered page.  The ActionConfig will be put in the configured package, meaning that it will inherit the default Interceptor stack for that package.  The default package is <TT>codebehind-default</TT>, however, it can be configured in any <A href="constant-configuration.html" title="Constant Configuration">configuration file</A> via the <TT>struts.codebehind.defaultPackage</TT> constant.</P>

<H3><A name="CodebehindPlugin-DefaultResults"></A>Default Results</H3>

<P>In many applications, a majority of Results could have the same root name as the action mapping.  To reduce this unnecessary configuration, the Struts plugin will try to guess the appropriate Result, if none is explicitly configured.  This technique works for any result code, including <TT>success</TT>. When combined with the <A href="zero-configuration.html" title="Zero Configuration">Zero Configuration</A> style, the amount of configuration in an application dwindles to next to nothing.</P>

<P>When no explicitly configured Result is found for an Action's result code, the plugin, again, searches the web application for a matching page. Specifically, the following patterns, in the following order, are used to locate a page:</P>

<OL>
	<LI><TT>/NAMESPACE/ACTION-RESULT_CODE.(jsp|vm|ftl)</TT></LI>
	<LI><TT>/NAMESPACE/ACTION.(jsp|vm|ftl)</TT></LI>
</OL>


<P>These two patterns are searched for each of the three default page extensions: jsp, vm, and ftl.  For example, if the request is for <TT><A href="http://www.company.com/myapp/member/login.action" class="external-link" rel="nofollow">http://www.company.com/myapp/member/login.action</A></TT>, so that the action name is <TT>login</TT> and the namespace is <TT>member</TT>, and the Action class returned a code of <TT>success</TT>, the plugin will look for the following pages, in this order: </P>

<OL>
	<LI><TT>/member/login-success.jsp</TT></LI>
	<LI><TT>/member/login.jsp</TT></LI>
	<LI><TT>/member/login-success.vm</TT></LI>
	<LI><TT>/member/login.vm</TT></LI>
	<LI><TT>/member/login-success.ftl</TT></LI>
	<LI><TT>/member/login.ftl</TT></LI>
</OL>


<P>If any of those pages are found, the appropriate Result will be constructed and processed.</P>

<H3><A name="CodebehindPlugin-Settings"></A>Settings</H3>

<P>The following settings can be customized.  See the <A href="http://cwiki.apache.org/confluence/display/WW/Configuration%20Files" class="external-link" rel="nofollow">developer guide</A>.</P>

<DIV class="table-wrap">
<TABLE class="confluenceTable"><TBODY>
<TR>
<TH class="confluenceTh">Setting</TH>
<TH class="confluenceTh">Description</TH>
<TH class="confluenceTh">Default</TH>
<TH class="confluenceTh">Possible Values</TH>
</TR>
<TR>
<TD class="confluenceTd"><TT>struts.codebehind.defaultPackage</TT></TD>
<TD class="confluenceTd">The default package to use for created Action mappings</TD>
<TD class="confluenceTd"><TT>codebehind-default</TT></TD>
<TD class="confluenceTd">Any existing package name</TD>
</TR>
<TR>
<TD class="confluenceTd"><TT>struts.configuration.classpath.disableActionScanning</TT></TD>
<TD class="confluenceTd">Whether to disable scanning the classpath for Action classes or not</TD>
<TD class="confluenceTd"><TT>false</TT></TD>
<TD class="confluenceTd"><TT>true</TT> or <TT>false</TT></TD>
</TR>
</TBODY></TABLE>
</DIV>


<H3><A name="CodebehindPlugin-Installation"></A>Installation</H3>

<P>This plugin can be installed by copying the plugin jar into your application's <TT>/WEB-INF/lib</TT> directory.  No other files need to be copied or created.</P>
        </DIV>

        
      </DIV>
    </DIV>
    <DIV class="footer">
      Generated by
      <A href="http://www.atlassian.com/confluence/">Atlassian Confluence</A> (Version: 3.4.9 Build: 2042 Feb 14, 2011)
      <A href="http://could.it/autoexport/">Auto Export Plugin</A> (Version: 1.0.0-dkulp)
    </DIV>
  </BODY>
</HTML>